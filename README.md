
# 1С-Битрикс в Docker

Шаблон окружения для быстрого поднятия [1С-Битрикс](https://www.1c-bitrix.ru/) на `Docker` & `compose plugin`, который можно дальше переиспользовать.

Окружение:
* `Docker` (v20.10) & `compose` plugin
* [apache2](https://hub.docker.com/r/ubuntu/apache2) (`apache2` проксирует `fcgi` на контейнер `php`, который должен называться `backend`)
* [php-fpm](https://hub.docker.com/_/php) 7.4

Образы `apache2` и `php-fpm` специально конфигурировались для нормальной работы 1С-Битрикс.


## Запуск

> В конфиг `docker-compose.yml` уже задана сеть `172.70.0.1/24`

```bash
$ docker compose up
```

После чего:
* сайт будет доступен по следующему URL `http://172.70.0.4/`, путь до корня внутри контейнеров `/var/www/html`
* `mysql` будет доступна на `localhost:53000`, а для установки CMS доступен хост `db`, логин/пароль/БД `root`/`root`/`1c-bitrix`
* логи прокинуться из контейнеров (`apache2` & `php`) в директорию `logs`

Контейнеры не поставляют развернутый сайт на CMS 1С-Битрикс, а только содержат минимально необходимый набор для установки по схеме [bitrixsetup.php](https://www.1c-bitrix.ru/download/cms.php#tab-subsection-2). Поэтому после запуска контейнеров необходимо перейти по адресу `http://172.70.0.4/` и установить CMS 1С-Битрикс.


## Переиспользование

> `docker-compose.yml` здесь для примера, для преиспользования нужно писать свой конфиг по примеру `docker-compose.yml`

Образ `php` имеет поддержку отладки `xdebug` на `9003` порту. Для этого в контейнер `php` нужно прокинуть дополнительный хост `host.docker.internal` с указанием `gateway`.
